basePath: /api/v1
definitions:
  asset.CredentialRequest:
    properties:
      description:
        type: string
      id:
        type: integer
      name:
        maxLength: 100
        minLength: 2
        type: string
      passphrase:
        type: string
      password:
        type: string
      privateKey:
        type: string
      type:
        enum:
        - password
        - key
        type: string
      username:
        type: string
    required:
    - name
    - type
    type: object
  asset.HostRequest:
    properties:
      cloudAccountId:
        type: integer
      cloudInstanceId:
        type: string
      cloudProvider:
        type: string
      credentialId:
        type: integer
      description:
        type: string
      groupId:
        type: integer
      id:
        type: integer
      ip:
        type: string
      name:
        maxLength: 100
        minLength: 2
        type: string
      port:
        maximum: 65535
        minimum: 1
        type: integer
      sshUser:
        type: string
      tags:
        type: string
      type:
        enum:
        - self
        - cloud
        type: string
    required:
    - ip
    - name
    - port
    - sshUser
    - type
    type: object
  model.AlertChannel:
    properties:
      channelType:
        description: '通道类型: email, webhook, wechat, dingtalk, feishu'
        type: string
      config:
        description: 通道配置（JSON格式存储）
        type: string
      createdAt:
        type: string
      enabled:
        description: 是否启用
        type: boolean
      id:
        type: integer
      name:
        description: 通道名称
        type: string
      updatedAt:
        type: string
    type: object
  model.AlertLog:
    properties:
      alertType:
        description: 告警类型
        type: string
      channelType:
        description: 发送通道
        type: string
      createdAt:
        type: string
      domain:
        description: 域名
        type: string
      domainMonitorId:
        description: 域名监控ID
        type: integer
      errorMsg:
        description: 错误信息
        type: string
      id:
        type: integer
      message:
        description: 告警消息内容
        type: string
      sentAt:
        description: 发送时间
        type: string
      status:
        description: '状态: success, failed'
        type: string
    type: object
  model.AlertReceiver:
    properties:
      createdAt:
        type: string
      dingtalkId:
        description: 钉钉ID
        type: string
      email:
        description: 邮箱地址
        type: string
      enableDingTalk:
        description: 接收钉钉
        type: boolean
      enableEmail:
        description: 告警方式偏好
        type: boolean
      enableFeishu:
        description: 接收飞书
        type: boolean
      enableSystemMsg:
        description: 接收系统消息
        type: boolean
      enableWeChat:
        description: 接收企业微信
        type: boolean
      enableWebhook:
        description: 接收Webhook
        type: boolean
      feishuId:
        description: 飞书ID
        type: string
      id:
        type: integer
      name:
        description: 接收人姓名
        type: string
      phone:
        description: 手机号
        type: string
      updatedAt:
        type: string
      userId:
        description: 关联的系统用户ID
        type: integer
      wechatId:
        description: 企业微信ID
        type: string
    type: object
  model.AlertReceiverChannel:
    properties:
      channelId:
        description: 通道ID
        type: integer
      config:
        description: |-
          在关联时使用的附加配置（JSON格式）
          用于存储通道特定的接收人配置，如飞书的user_id或phone等
        type: string
      createdAt:
        type: string
      id:
        type: integer
      receiverId:
        description: 接收人ID
        type: integer
    type: object
  model.DomainMonitor:
    properties:
      alertConfigId:
        description: 告警配置
        type: integer
      checkInterval:
        description: 检查间隔(秒)
        type: integer
      createdAt:
        type: string
      domain:
        description: 域名
        type: string
      enableAlert:
        description: 是否启用告警
        type: boolean
      enableSSL:
        description: 是否启用SSL检查
        type: boolean
      id:
        type: integer
      lastCheck:
        description: 最后检查时间
        type: string
      nextCheck:
        description: 下次检查时间
        type: string
      responseThreshold:
        description: 响应时间阈值(ms)
        type: integer
      responseTime:
        description: 响应时间(ms)
        type: integer
      sslExpiry:
        description: SSL过期时间
        type: string
      sslExpiryDays:
        description: SSL过期提前告警天数
        type: integer
      sslValid:
        description: SSL是否有效
        type: boolean
      status:
        description: '状态: normal, abnormal, paused, unknown'
        type: string
      updatedAt:
        type: string
    type: object
  rbac.AssignUserPositionsRequest:
    properties:
      positionIds:
        items:
          type: integer
        type: array
    type: object
  rbac.AssignUserRolesRequest:
    properties:
      roleIds:
        items:
          type: integer
        type: array
    required:
    - roleIds
    type: object
  rbac.ChangePasswordRequest:
    properties:
      newPassword:
        minLength: 6
        type: string
      oldPassword:
        type: string
    required:
    - newPassword
    - oldPassword
    type: object
  rbac.LoginRequest:
    properties:
      captchaCode:
        type: string
      captchaId:
        type: string
      captchaId2:
        description: 兼容前端可能的字段名
        type: string
      password:
        type: string
      username:
        type: string
    required:
    - password
    - username
    type: object
  rbac.RegisterRequest:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
      phone:
        type: string
      realName:
        type: string
      username:
        type: string
    required:
    - email
    - password
    - username
    type: object
  rbac.ResetPasswordRequest:
    properties:
      password:
        minLength: 6
        type: string
    required:
    - password
    type: object
  rbac.SysUser:
    type: object
  rbac.VerifyCaptchaRequest:
    properties:
      captchaCode:
        type: string
      captchaId:
        type: string
      captchaId2:
        description: 兼容前端可能的字段名
        type: string
    type: object
  response.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
      timestamp:
        type: integer
      trace_id:
        type: string
    type: object
  server.BindUserToRoleRequest:
    properties:
      clusterId:
        type: integer
      roleName:
        type: string
      roleNamespace:
        type: string
      roleType:
        description: ClusterRole 或 Role
        type: string
      userId:
        type: integer
    required:
    - clusterId
    - roleName
    - roleType
    - userId
    type: object
  server.CreateRoleRequest:
    properties:
      name:
        type: string
      namespace:
        type: string
      rules:
        items:
          $ref: '#/definitions/server.CreateRoleRule'
        type: array
    type: object
  server.CreateRoleRule:
    properties:
      apiGroups:
        items:
          type: string
        type: array
      resourceNames:
        items:
          type: string
        type: array
      resources:
        items:
          type: string
        type: array
      verbs:
        items:
          type: string
        type: array
    type: object
  server.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
  server.UnbindUserFromRoleRequest:
    properties:
      clusterId:
        type: integer
      roleName:
        type: string
      roleNamespace:
        type: string
      userId:
        type: integer
    required:
    - clusterId
    - roleName
    - userId
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: 运维管理平台 API 文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: OpsHub API
  version: "1.0"
paths:
  /api/v1/example:
    get:
      consumes:
      - application/json
      description: 这是一个示例接口
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  additionalProperties:
                    type: string
                  type: object
              type: object
      summary: 示例接口
      tags:
      - 示例
  /api/v1/kubernetes/clusters:
    get:
      consumes:
      - application/json
      description: 获取所有 Kubernetes 集群
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取集群列表
      tags:
      - Kubernetes/Cluster
    post:
      consumes:
      - application/json
      description: 创建新的 Kubernetes 集群
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 创建集群
      tags:
      - Kubernetes/Cluster
  /api/v1/kubernetes/clusters/{id}:
    delete:
      consumes:
      - application/json
      description: 删除 Kubernetes 集群
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 删除集群
      tags:
      - Kubernetes/Cluster
    get:
      consumes:
      - application/json
      description: 获取 Kubernetes 集群详细信息
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取集群详情
      tags:
      - Kubernetes/Cluster
    put:
      consumes:
      - application/json
      description: 更新 Kubernetes 集群信息
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 更新集群
      tags:
      - Kubernetes/Cluster
  /api/v1/kubernetes/clusters/{id}/test:
    post:
      consumes:
      - application/json
      description: 测试 Kubernetes 集群连接状态
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 测试集群连接
      tags:
      - Kubernetes/Cluster
  /api/v1/kubernetes/clusters/kubeconfig/existing:
    get:
      consumes:
      - application/json
      description: 获取当前用户在指定集群的最新KubeConfig
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 获取用户现有的KubeConfig
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/{clusterId}/roles:
    post:
      consumes:
      - application/json
      description: 创建集群角色或命名空间角色
      parameters:
      - description: 集群ID
        in: path
        name: clusterId
        required: true
        type: integer
      - description: 角色信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/server.CreateRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 创建角色
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/clusters/{id}/config:
    get:
      consumes:
      - application/json
      description: 获取集群的 KubeConfig 配置（已解密）
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取集群凭证
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/{id}/sync:
    post:
      consumes:
      - application/json
      description: 同步指定集群的状态信息（节点数、Pod数等）
      parameters:
      - description: 集群ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 同步集群状态
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/kubeconfig:
    delete:
      consumes:
      - application/json
      description: 吊销用户的集群 KubeConfig 凭据
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 吊销 KubeConfig
      tags:
      - Kubernetes/Cluster
    post:
      consumes:
      - application/json
      description: 为当前用户生成集群的 KubeConfig 凭据
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 生成 KubeConfig
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/kubeconfig/revoke:
    delete:
      consumes:
      - application/json
      description: 删除 ServiceAccount、所有相关 RoleBinding 和数据库记录
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 完全吊销凭据
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/kubeconfig/sa:
    post:
      consumes:
      - application/json
      description: 为指定的ServiceAccount生成KubeConfig凭据
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 根据ServiceAccount获取KubeConfig
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/clusters/sync-all:
    post:
      consumes:
      - application/json
      description: 同步所有集群的状态信息（用于后台定时任务）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 同步所有集群状态
      tags:
      - Kubernetes/Cluster
  /api/v1/plugins/kubernetes/resources/api-groups:
    get:
      consumes:
      - application/json
      description: 获取Kubernetes集群所有可用的API组
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取API组列表
      tags:
      - Kubernetes/Resources
  /api/v1/plugins/kubernetes/resources/api-resources:
    get:
      consumes:
      - application/json
      description: 根据选定的API组列表获取所有这些组下的资源类型
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: API组列表（逗号分隔）
        in: query
        name: apiGroups
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 根据API组获取资源列表
      tags:
      - Kubernetes/Resources
  /api/v1/plugins/kubernetes/role-bindings/available-users:
    get:
      consumes:
      - application/json
      description: 获取系统中可以绑定的用户列表
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        type: string
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取可绑定的用户列表
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/bind:
    post:
      consumes:
      - application/json
      description: 将平台用户绑定到指定的K8s角色
      parameters:
      - description: 绑定信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.BindUserToRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 绑定用户到K8s角色
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/credential-users:
    get:
      consumes:
      - application/json
      description: 获取当前用户在指定集群的凭据用户（ServiceAccount）
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取集群的凭据用户列表
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/unbind:
    delete:
      consumes:
      - application/json
      description: 解除用户与K8s角色的绑定
      parameters:
      - description: 解绑信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.UnbindUserFromRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 解绑用户K8s角色
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/user-bindings:
    get:
      consumes:
      - application/json
      description: 获取指定集群中所有用户（或指定用户）的K8s角色绑定列表
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 用户ID（可选，不传则返回所有用户）
        in: query
        name: userId
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取用户的所有K8s角色绑定
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/user-roles:
    get:
      consumes:
      - application/json
      description: 获取指定用户在指定集群的所有角色
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 用户ID
        in: query
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取用户在指定集群的角色列表
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/role-bindings/users:
    get:
      consumes:
      - application/json
      description: 获取指定角色的所有绑定用户
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 角色名称
        in: query
        name: roleName
        required: true
        type: string
      - description: 角色命名空间
        in: query
        name: roleNamespace
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取角色已绑定的用户列表
      tags:
      - Kubernetes/RoleBinding
  /api/v1/plugins/kubernetes/roles/{namespace}/{name}:
    delete:
      consumes:
      - application/json
      description: 删除指定的角色
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 命名空间
        in: path
        name: namespace
        required: true
        type: string
      - description: 角色名
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 删除角色
      tags:
      - Kubernetes/Role
    get:
      consumes:
      - application/json
      description: 获取角色的详细信息，包括权限规则
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 命名空间
        in: path
        name: namespace
        required: true
        type: string
      - description: 角色名
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取角色详情
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/roles/cluster:
    get:
      consumes:
      - application/json
      description: 获取所有 Kubernetes 集群级别的角色
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取集群角色列表
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/roles/create-defaults:
    post:
      consumes:
      - application/json
      description: 创建 OpsHub 平台使用的默认集群角色
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 创建默认集群角色
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/roles/create-defaults-namespace:
    post:
      consumes:
      - application/json
      description: 创建用于命名空间级别授权的 ClusterRole（通过 RoleBinding 在特定命名空间生效）
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 创建默认命名空间角色
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/roles/namespace:
    get:
      consumes:
      - application/json
      description: 获取指定命名空间的所有角色
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      - description: 命名空间
        in: query
        name: namespace
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取命名空间角色列表
      tags:
      - Kubernetes/Role
  /api/v1/plugins/kubernetes/roles/namespaces:
    get:
      consumes:
      - application/json
      description: 获取所有命名空间
      parameters:
      - description: 集群ID
        in: query
        name: clusterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.Response'
      summary: 获取命名空间列表
      tags:
      - Kubernetes/Role
  /asset-hosts:
    get:
      consumes:
      - application/json
      description: 分页获取主机列表，支持搜索和按分组筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 搜索关键字
        in: query
        name: keyword
        type: string
      - description: 分组ID
        in: query
        name: groupId
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取主机列表
      tags:
      - 资产管理-主机
    post:
      consumes:
      - application/json
      description: 创建新的主机资源
      parameters:
      - description: 主机信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/asset.HostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 创建主机
      tags:
      - 资产管理-主机
  /asset-hosts/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的主机资源
      parameters:
      - description: 主机ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 删除主机
      tags:
      - 资产管理-主机
    get:
      consumes:
      - application/json
      description: 获取单个主机的详细信息
      parameters:
      - description: 主机ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取主机详情
      tags:
      - 资产管理-主机
    put:
      consumes:
      - application/json
      description: 更新已有的主机信息
      parameters:
      - description: 主机ID
        in: path
        name: id
        required: true
        type: integer
      - description: 主机信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/asset.HostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 更新主机信息
      tags:
      - 资产管理-主机
  /audit/operation-logs:
    get:
      consumes:
      - application/json
      description: 分页获取系统操作日志，支持按用户、模块、操作、状态和时间范围筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 用户名
        in: query
        name: username
        type: string
      - description: 模块名
        in: query
        name: module
        type: string
      - description: 操作
        in: query
        name: action
        type: string
      - description: 状态
        in: query
        name: status
        type: string
      - description: 开始时间
        in: query
        name: startTime
        type: string
      - description: 结束时间
        in: query
        name: endTime
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取操作日志列表
      tags:
      - 审计管理-操作日志
  /audit/operation-logs/{id}:
    get:
      consumes:
      - application/json
      description: 获取单条操作日志的详细信息
      parameters:
      - description: 操作日志ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取操作日志详情
      tags:
      - 审计管理-操作日志
  /captcha:
    get:
      consumes:
      - application/json
      description: 获取登录用的验证码图片和ID
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      summary: 获取验证码
      tags:
      - 认证管理
  /captcha/verify:
    post:
      consumes:
      - application/json
      description: 验证用户输入的验证码是否正确
      parameters:
      - description: 验证码信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.VerifyCaptchaRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 验证成功
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: 验证码错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 验证验证码
      tags:
      - 认证管理
  /credentials:
    get:
      consumes:
      - application/json
      description: 分页获取凭证列表，支持搜索
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 搜索关键字
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取凭证列表
      tags:
      - 资产管理-凭证
    post:
      consumes:
      - application/json
      description: 创建新的凭证用于主机连接
      parameters:
      - description: 凭证信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/asset.CredentialRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 创建凭证
      tags:
      - 资产管理-凭证
  /credentials/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的凭证
      parameters:
      - description: 凭证ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 删除凭证
      tags:
      - 资产管理-凭证
    get:
      consumes:
      - application/json
      description: 获取单个凭证的详细信息（包含解密的私钥）
      parameters:
      - description: 凭证ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取凭证详情
      tags:
      - 资产管理-凭证
    put:
      consumes:
      - application/json
      description: 更新已有的凭证信息
      parameters:
      - description: 凭证ID
        in: path
        name: id
        required: true
        type: integer
      - description: 凭证信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/asset.CredentialRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 更新凭证
      tags:
      - 资产管理-凭证
  /health:
    get:
      consumes:
      - application/json
      description: 检查服务健康状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  additionalProperties:
                    type: string
                  type: object
              type: object
      summary: 健康检查
      tags:
      - 系统
  /monitor/alerts/channels:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.AlertChannel'
            type: array
      summary: 获取告警通道列表
      tags:
      - AlertChannel
    post:
      consumes:
      - application/json
      parameters:
      - description: 告警通道信息
        in: body
        name: channel
        required: true
        schema:
          $ref: '#/definitions/model.AlertChannel'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertChannel'
      summary: 创建告警通道
      tags:
      - AlertChannel
  /monitor/alerts/channels/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 通道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            type: string
      summary: 删除告警通道
      tags:
      - AlertChannel
    get:
      consumes:
      - application/json
      parameters:
      - description: 通道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertChannel'
      summary: 获取告警通道详情
      tags:
      - AlertChannel
    put:
      consumes:
      - application/json
      parameters:
      - description: 通道ID
        in: path
        name: id
        required: true
        type: integer
      - description: 告警通道信息
        in: body
        name: channel
        required: true
        schema:
          $ref: '#/definitions/model.AlertChannel'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertChannel'
      summary: 更新告警通道
      tags:
      - AlertChannel
  /monitor/alerts/logs:
    get:
      consumes:
      - application/json
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 域名监控ID
        in: query
        name: domainMonitorId
        type: integer
      - description: 告警类型
        in: query
        name: alertType
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.AlertLog'
            type: array
      summary: 获取告警日志列表
      tags:
      - AlertLog
  /monitor/alerts/receiver-channels/:receiverId:
    get:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: receiverId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.AlertReceiverChannel'
            type: array
      summary: 获取接收人的通道关联列表
      tags:
      - AlertReceiverChannel
    post:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: receiverId
        required: true
        type: integer
      - description: 关联信息
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/model.AlertReceiverChannel'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertReceiverChannel'
      summary: 添加接收人通道关联
      tags:
      - AlertReceiverChannel
  /monitor/alerts/receiver-channels/:receiverId/:channelId:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: receiverId
        required: true
        type: integer
      - description: 通道ID
        in: path
        name: channelId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            type: string
      summary: 删除接收人通道关联
      tags:
      - AlertReceiverChannel
    put:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: receiverId
        required: true
        type: integer
      - description: 通道ID
        in: path
        name: channelId
        required: true
        type: integer
      - description: 配置
        in: body
        name: req
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertReceiverChannel'
      summary: 更新接收人通道关联配置
      tags:
      - AlertReceiverChannel
  /monitor/alerts/receivers:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.AlertReceiver'
            type: array
      summary: 获取告警接收人列表
      tags:
      - AlertReceiver
    post:
      consumes:
      - application/json
      parameters:
      - description: 告警接收人信息
        in: body
        name: receiver
        required: true
        schema:
          $ref: '#/definitions/model.AlertReceiver'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertReceiver'
      summary: 创建告警接收人
      tags:
      - AlertReceiver
  /monitor/alerts/receivers/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            type: string
      summary: 删除告警接收人
      tags:
      - AlertReceiver
    get:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertReceiver'
      summary: 获取告警接收人详情
      tags:
      - AlertReceiver
    put:
      consumes:
      - application/json
      parameters:
      - description: 接收人ID
        in: path
        name: id
        required: true
        type: integer
      - description: 告警接收人信息
        in: body
        name: receiver
        required: true
        schema:
          $ref: '#/definitions/model.AlertReceiver'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AlertReceiver'
      summary: 更新告警接收人
      tags:
      - AlertReceiver
  /monitor/alerts/stats:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 获取告警统计信息
      tags:
      - AlertLog
  /monitor/domains:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.DomainMonitor'
            type: array
      summary: 获取域名监控列表
      tags:
      - DomainMonitor
    post:
      consumes:
      - application/json
      parameters:
      - description: 域名监控信息
        in: body
        name: monitor
        required: true
        schema:
          $ref: '#/definitions/model.DomainMonitor'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DomainMonitor'
      summary: 创建域名监控
      tags:
      - DomainMonitor
  /monitor/domains/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 域名ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            type: string
      summary: 删除域名监控
      tags:
      - DomainMonitor
    get:
      consumes:
      - application/json
      parameters:
      - description: 域名ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DomainMonitor'
      summary: 获取域名监控详情
      tags:
      - DomainMonitor
    put:
      consumes:
      - application/json
      parameters:
      - description: 域名ID
        in: path
        name: id
        required: true
        type: integer
      - description: 域名监控信息
        in: body
        name: monitor
        required: true
        schema:
          $ref: '#/definitions/model.DomainMonitor'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DomainMonitor'
      summary: 更新域名监控
      tags:
      - DomainMonitor
  /monitor/domains/{id}/check:
    post:
      consumes:
      - application/json
      parameters:
      - description: 域名ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.DomainMonitor'
      summary: 立即检查域名
      tags:
      - DomainMonitor
  /monitor/domains/stats:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              format: int64
              type: integer
            type: object
      summary: 获取域名监控统计数据
      tags:
      - DomainMonitor
  /profile:
    get:
      consumes:
      - application/json
      description: 获取登录用户的个人信息（需要Bearer Token认证）
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取当前用户信息
      tags:
      - 用户管理
  /profile/password:
    put:
      consumes:
      - application/json
      description: 用户修改自己的登录密码
      parameters:
      - description: 密码信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 修改成功
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 修改用户密码
      tags:
      - 用户管理
  /public/login:
    post:
      consumes:
      - application/json
      description: 用户使用用户名、密码和验证码登录系统
      parameters:
      - description: 登录信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 用户登录
      tags:
      - 认证管理
  /public/register:
    post:
      consumes:
      - application/json
      description: 新用户使用用户名、密码等信息注册账号
      parameters:
      - description: 注册信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注册成功
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 用户注册
      tags:
      - 认证管理
  /users:
    get:
      consumes:
      - application/json
      description: 分页获取用户列表，支持按关键字和部门筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 搜索关键字
        in: query
        name: keyword
        type: string
      - description: 部门ID
        in: query
        name: departmentId
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取用户列表
      tags:
      - 用户管理
    post:
      consumes:
      - application/json
      description: 管理员创建新用户
      parameters:
      - description: 用户信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.SysUser'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 创建用户
      tags:
      - 用户管理
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: 管理员删除用户
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 删除用户
      tags:
      - 用户管理
    get:
      consumes:
      - application/json
      description: 获取单个用户的详细信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 获取用户详情
      tags:
      - 用户管理
    put:
      consumes:
      - application/json
      description: 管理员更新用户信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.SysUser'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 更新用户信息
      tags:
      - 用户管理
  /users/{id}/password/reset:
    post:
      consumes:
      - application/json
      description: 管理员重置用户密码
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 新密码
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 重置用户密码
      tags:
      - 用户管理
  /users/{id}/positions:
    post:
      consumes:
      - application/json
      description: 为用户分配岗位
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 岗位IDs
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.AssignUserPositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 分配用户岗位
      tags:
      - 用户管理
  /users/{id}/roles:
    post:
      consumes:
      - application/json
      description: 为用户分配角色
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 角色IDs
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/rbac.AssignUserRolesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - Bearer: []
      summary: 分配用户角色
      tags:
      - 用户管理
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
